$schema: "https://xperiens.waldiez.io/schema/v1/manifest"
# ┌─────────────────────────────────────────────────────────────┐
# │ IMMUTABLE SECTION                                           │
# │ Do not modify. Changes require version bump.                │
# └─────────────────────────────────────────────────────────────┘
identity:
  wid: "wdz://xperiens.waldiez.io/time/clock/v1"
  type: "process"
  created: "2026-02-07T13:46:23Z" # MUST match .tic
# ┌─────────────────────────────────────────────────────────────┐
# │ STABLE SECTION                                              │
# │ Rarely changes. Requires human review and approval.         │
# └─────────────────────────────────────────────────────────────┘
description:
  name: "UTC Day Clock"
  purpose: "Record the passage of UTC days via version control"
  tags: ["time", "reference", "heartbeat"]
interface:
  operations:
    - name: "heartbeat"
      description: "Prove existence by recording current timestamp"
      params: {}
      returns: {type: bool, description: "true if heartbeat recorded"}
    - name: "tick"
      description: "Record current UTC day if new"
      params: {}
      returns: {type: bool, description: "true if new day recorded"}
  state_schema:
    last_heartbeat: {type: datetime, format: "ISO-8601", mutable: true}
    heartbeat_count: {type: integer, mutable: true}
    last_tick: {type: date, format: "YYYY-MM-DD", mutable: true}
    total_ticks: {type: integer, mutable: true}
# ┌─────────────────────────────────────────────────────────────┐
# │ MUTABLE SECTION                                             │
# │ Automation may modify. DO NOT EDIT MANUALLY.                │
# │ This section will be added by automation on first run.      │
# └─────────────────────────────────────────────────────────────┘
# state:
#   last_heartbeat: "..."
#   heartbeat_count: 0
#   last_tick: "..."
#   total_ticks: 0
#   last_updated: "..."

# ┌─────────────────────────────────────────────────────────────┐
# │ LIFECYCLE SECTION                                           │
# │ Occasional changes. Requires human approval.                │
# └─────────────────────────────────────────────────────────────┘
execution:
  runtime: "wdz://runtimes/bash"
  trigger: "wdz://triggers/heartbeat"
lifecycle:
  health_check:
    type: "heartbeat"
    interval_max: "PT23H59M" # ISO 8601 duration: 23 hours 59 minutes
    action: "wdz://health/heartbeat-monitor"
state:
  last_heartbeat: "2026-02-17T17:53:15Z"
  heartbeat_count: 9
  last_tick: "2026-02-17"
  total_ticks: 11
  last_updated: "2026-02-17T17:53:15Z"
